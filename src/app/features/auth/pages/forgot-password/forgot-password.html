<div class="login-form">
    <header class="login-form__header">
        <h2 class="login-form__title">Recuperar contraseña</h2>
        <p class="login-form__subtitle">
            Te enviaremos un enlace para restablecer tu contraseña
        </p>
    </header>

    @if (!emailSent()) {
    <form class="login-form__form" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
        <div class="login-form__field">
            <label class="login-form__label" for="email">Email</label>
            <div class="login-form__input-wrapper">
                <input class="login-form__input" type="email" id="email" formControlName="email"
                    placeholder="email@fisiogest.es" />
            </div>
        </div>

        <button type="submit" class="login-form__button" [disabled]="forgotPasswordForm.invalid || isLoading()">
            {{ isLoading() ? 'Enviando...' : 'Enviar enlace' }}
        </button>

        <div class="login-form__divider">
            <span class="login-form__divider-text">¿Ya tienes tu contraseña?</span>
        </div>

        <a routerLink="/login" class="login-form__register-link">
            Volver a iniciar sesión
        </a>
    </form>
    }

    @if (emailSent()) {
    <div class="login-form__success">
        <p class="login-form__success-message">
            ✓ Si el email existe en nuestro sistema, recibirás un enlace de recuperación en breve.
        </p>
        <p class="login-form__success-submessage">
            Revisa tu bandeja de entrada y la carpeta de spam.
        </p>

        <a routerLink="/login" class="login-form__button">
            Volver al iniciar sesión
        </a>
    </div>
    }
</div>